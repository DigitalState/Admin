webpackJsonp([11],{1743:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=a(0),s=a(13),r=a(4),i=a(303),o=(a.n(i),a(819)),l=(a.n(o),a(1911)),c=a(302),d=a(304),u=a(1850),h=a(1851),p=a(1849);a.d(n,"DsSystemModule",(function(){return v}));var v=(function(){function t(){}return t})();v=__decorate([a.i(e.NgModule)({imports:[s.CommonModule,r.FormsModule,r.ReactiveFormsModule,i.NgxDatatableModule,o.LaddaModule,d.a,l.a],declarations:[u.a,h.a,p.a],providers:[c.a,c.c]})],v)},1849:function(t,n,a){"use strict";var e=a(0),s=a(36),r=a(67),i=a(1872),o=a(31),l=a(313),c=a.n(l),d=a(1925),u=a.n(d),h=a(1);a.n(h);a.d(n,"a",(function(){return p}));var p=(function(t){function n(n,a,e,s){var r=t.call(this,n)||this;return r.injector=n,r.http=a,r.appState=e,r.auth=s,r.pageTitle="general.menu.healthCheck",r.statusesNames=[],r.microservicesStatuses=[],r.responsesObservables=[],r}return __extends(n,t),n.prototype.ngOnInit=function(){var n=this;t.prototype.ngOnInit.call(this),c()(this.appState.get("microservices"),(function(t,a){if(t.entrypoint&&t.entrypoint.url){var e=n.requestHealthStatus(a,t.entrypoint.url+"health");n.responsesObservables.push(e)}})),this.runRequests()},n.prototype.runRequests=function(){var t=this;this.microservicesStatuses=[],h.Observable.forkJoin(this.responsesObservables).subscribe((function(n){t.microservicesStatuses=u()(t.microservicesStatuses,"name")}))},n.prototype.requestHealthStatus=function(t,n){var a=this,e=new s.Headers({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+this.auth.getToken()}),r=new s.RequestOptions({headers:e});return this.http.get(n,r).map((function(n){var a=n.json();return a.name=t,a})).flatMap((function(n){return a.handleHealthSuccessResponse(t,n),h.Observable.of(n)})).catch((function(n){return a.handleHealthErrorResponse(t,n),h.Observable.of(n)}))},n.prototype.handleHealthSuccessResponse=function(t,n){var a=this,e={name:t,isHealthy:n.healthy,timestamp:n.timestamp,itemsStatuses:{}};c()(n.statuses,(function(t,n){a.statusesNames.indexOf(n)<0&&a.statusesNames.push(n),e.itemsStatuses[n]={isHealthy:t.healthy,timestamp:t.timestamp}})),this.microservicesStatuses.push(e)},n.prototype.handleHealthErrorResponse=function(t,n){console.warn("Error while requesting health status of ("+t+")",n);var a={name:t,isHealthy:null,timestamp:null,itemsStatuses:{}};this.microservicesStatuses.push(a)},n})(i.a);p=__decorate([a.i(e.Component)({selector:"ds-health",template:a(1956),styles:[a(1934)]}),__metadata("design:paramtypes",[e.Injector,s.Http,o.a,r.a])],p)},1850:function(t,n,a){"use strict";var e=a(0),s=a(1872);a.d(n,"a",(function(){return r}));var r=(function(t){function n(n){var a=t.call(this,n)||this;return a.injector=n,a.pageTitle="general.menu.systems",a.hostPrefix=window.location.protocol+"//"+window.location.hostname,a}return __extends(n,t),n})(s.a);r=__decorate([a.i(e.Component)({selector:"ds-system",template:a(1957),styles:[a(1935)]}),__metadata("design:paramtypes",[e.Injector])],r)},1851:function(t,n,a){"use strict";var e=a(0),s=a(4),r=a(30),i=a(202),o=(a.n(i),a(79)),l=a(302),c=a(112),d=a(1924),u=a.n(d),h=a(829),p=a.n(h),v=a(24),m=a.n(v),f=a(1);a.n(f);a.d(n,"a",(function(){return b}));var b=(function(){function t(t,n,a,e,s,r,i){this.injector=t,this.globalState=n,this.formBuilder=a,this.translate=e,this.cms=s,this.microserviceConfig=r,this.toastr=i,this.translationSlugs=["translation","admin-translation","portal-translation"],this.saveInProgress=!1,this.buildForm()}return t.prototype.ngOnInit=function(){var t=this;setTimeout((function(){t.globalState.notifyDataChanged("menu.activeLink",{title:"general.menu.translations"})})),this.activeTranslations=this.translate.translations,this.loadTranslations()},t.prototype.ngOnDestroy=function(){},t.prototype.buildForm=function(){var t=p()(this.translationSlugs,(function(t,n){return t[n]="",t}),{});this.form=this.formBuilder.group(t)},t.prototype.loadTranslations=function(){var t=this;this.cms.getTranslations(this.translationSlugs,!1).subscribe((function(n){if(m()(n)){var a=u()(n,(function(t){return JSON.stringify(t,null,2)}));t.form.setValue(a)}}),(function(){t.toastr.error(t.translate.instant("ds.messages.translationLoadingFailed"))}))},t.prototype.reloadTranslations=function(){var t=this,n=this.translate.langs.map((function(n){return t.translate.reloadLang(n)}));f.Observable.forkJoin(n).subscribe((function(){t.translate.use(t.translate.currentLang)}))},t.prototype.saveTranslation=function(t){var n=this;this.saveInProgress=!0;var a;try{if(!(a=JSON.parse(this.form.getRawValue()[t])))throw new Error("ds.microservices.entity.validation.json")}catch(t){return this.toastr.error(this.translate.instant("ds.microservices.entity.validation.json")),void(this.saveInProgress=!1)}this.cms.saveTranslation(t,a).finally((function(){n.saveInProgress=!1})).subscribe((function(t){n.toastr.success(n.translate.instant("ds.messages.translationSaveSucceeded"))}),(function(t){n.toastr.error(n.translate.instant(t.message),n.translate.instant(t.title))}))},t})();b=__decorate([a.i(e.Component)({selector:"ds-translations",template:a(1958)}),__metadata("design:paramtypes",[e.Injector,o.a,s.FormBuilder,r.c,c.a,l.a,i.ToastsManager])],b)},1872:function(t,n,a){"use strict";var e=a(0),s=a(79);a.d(n,"a",(function(){return r}));var r=(function(){function t(t){this.injector=t,this.globalState=this.injector.get(s.a)}return t.prototype.ngOnInit=function(){this.pageTitle&&this.applyPageTitle()},t.prototype.applyPageTitle=function(t){var n=this,a=t||this.pageTitle;a&&setTimeout((function(){n.globalState.notifyDataChanged("menu.activeLink",{title:a})}))},t})();r=__decorate([a.i(e.Component)({}),__metadata("design:paramtypes",[e.Injector])],r)},1911:function(t,n,a){"use strict";var e=a(29),s=a(1850),r=a(1851),i=a(1849);a.d(n,"a",(function(){return l}));var o=[{path:"",children:[{path:"",redirectTo:"/pages/settings/systems",pathMatch:"full"},{path:"systems",component:s.a},{path:"translations",component:r.a},{path:"health",component:i.a}]}],l=e.a.forChild(o)},1920:function(t,n,a){function e(t,n,a){var e=-1;n=s(n.length?n:[d],l(r));var u=i(t,(function(t,a,r){return{criteria:s(n,(function(n){return n(t)})),index:++e,value:t}}));return o(u,(function(t,n){return c(t,n,a)}))}var s=a(145),r=a(90),i=a(827),o=a(1921),l=a(828),c=a(1923),d=a(113);t.exports=e},1921:function(t,n){function a(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}t.exports=a},1922:function(t,n,a){function e(t,n){if(t!==n){var a=void 0!==t,e=null===t,r=t===t,i=s(t),o=void 0!==n,l=null===n,c=n===n,d=s(n);if(!l&&!d&&!i&&t>n||i&&o&&c&&!l&&!d||e&&o&&c||!a&&c||!r)return 1;if(!e&&!i&&!d&&t<n||d&&a&&r&&!e&&!i||l&&a&&r||!o&&r||!c)return-1}return 0}var s=a(147);t.exports=e},1923:function(t,n,a){function e(t,n,a){for(var e=-1,r=t.criteria,i=n.criteria,o=r.length,l=a.length;++e<o;){var c=s(r[e],i[e]);if(c){if(e>=l)return c;return c*("desc"==a[e]?-1:1)}}return t.index-n.index}var s=a(1922);t.exports=e},1924:function(t,n,a){function e(t,n){var a={};return n=i(n,3),r(t,(function(t,e,r){s(a,e,n(t,e,r))})),a}var s=a(207),r=a(826),i=a(90);t.exports=e},1925:function(t,n,a){var e=a(312),s=a(1920),r=a(80),i=a(146),o=r((function(t,n){if(null==t)return[];var a=n.length;return a>1&&i(t,n[0],n[1])?n=[]:a>2&&i(n[0],n[1],n[2])&&(n=[n[0]]),s(t,e(n,1),[])}));t.exports=o},1934:function(t,n){t.exports=".h-center{position:absolute;left:50%;transform:translate(-50%, 0)}.v-center{position:absolute;top:50%;transform:translate(0, -50%)}table.health-statuses{width:100%}table.health-statuses thead tr>*:nth-child(even){background:rgba(225,225,225,0.25)}table.health-statuses tbody tr:nth-child(odd){background:rgba(225,225,225,0.25)}table.health-statuses tbody tr:nth-child(even){background:transparent}table.health-statuses tbody tr>*:nth-child(even){background:rgba(225,225,225,0.25)}table.health-statuses th>div,table.health-statuses td>div{padding:1rem}table.health-statuses th .healthy{background-color:#d3e399}table.health-statuses th .sick{background-color:#f6bcbc}table.health-statuses td{text-align:center}table.health-statuses div.indicator{color:#ddd}table.health-statuses div.indicator.healthy{color:#90b900}table.health-statuses div.indicator.sick{color:#e85656}\n"},1935:function(t,n){t.exports=".h-center{position:absolute;left:50%;transform:translate(-50%, 0)}.v-center{position:absolute;top:50%;transform:translate(0, -50%)}.card-columns{column-count:2}@media (max-width: 767px){.card-columns{column-count:1}}\n"},1956:function(t,n){t.exports='<div class="card no-shadow">\n\t<div class="card-header p-0 border-0">\n\t\t\x3c!--<h3 class="card-title"></h3>--\x3e\n\t\t<button (click)="runRequests()" class="btn btn-default btn-icon collapsed">\n\t\t\t<i class="fa fa-refresh"></i>\n\t\t</button>\n\t</div>\n\n\t<div class="card-block p-0">\n\t\t<table class="health-statuses">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row"><span></span></th>\n\t\t\t\t\t<th *ngFor="let msStatus of microservicesStatuses">\n\t\t\t\t\t\t<div [ngClass]="{ \'healthy\': msStatus.isHealthy === true, \'sick\': msStatus.isHealthy === false }">\n\t\t\t\t\t\t\t{{ msStatus.name }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr *ngFor="let statusName of statusesNames">\n\t\t\t\t\t<th scope="row">\n\t\t\t\t\t\t<div>{{ statusName }}</div>\n\t\t\t\t\t</th>\n\t\t\t\t\t<td *ngFor="let msStatus of microservicesStatuses">\n\t\t\t\t\t\t<div *ngIf="!msStatus.itemsStatuses[statusName]"\n\t\t\t\t\t\t\t  class="indicator fa fa-question"></div>\n\t\t\t\t\t\t<div *ngIf="msStatus.itemsStatuses[statusName]"\n\t\t\t\t\t\t\t  class="indicator fa"\n\t\t\t\t\t\t\t  [ngClass]="{ \'healthy fa-check\': msStatus.itemsStatuses[statusName].isHealthy === true,\n\t\t\t\t\t\t\t               \'sick fa-times\': msStatus.itemsStatuses[statusName].isHealthy === false }"></div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>\n'},1957:function(t,n){t.exports='<div class="card-columns">\n\t<div class="card no-shadow">\n\t\t<div class="card-header">\n\t\t\t<h3 class="card-title">Camunda</h3>\n\t\t</div>\n\t\t<div class="card-block">\n\t\t\t<table class="name-value-table">\n\t\t\t\t<tbody class="group1">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">URL</th>\n\t\t\t\t\t<td><a href="{{hostPrefix}}:8055/camunda/app/welcome" target="_blank">{{hostPrefix}}:8055/camunda/app/welcome</a>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">User</th>\n\t\t\t\t\t<td>demo</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">Password</th>\n\t\t\t\t\t<td>demo</td>\n\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n\t<div class="card no-shadow">\n\t\t<div class="card-header">\n\t\t\t<h3 class="card-title">Portal</h3>\n\t\t</div>\n\t\t<div class="card-block">\n\t\t\t<table class="name-value-table">\n\t\t\t\t<tbody class="group1">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">Fixture (Authentication)</th>\n\t\t\t\t\t<td><a href="https://github.com/DigitalState/Authentication/blob/036a94a08ee65615e95c5ce4d9e26adebdb51c9c/src/AppBundle/Resources/data/dev/individual/users.yml" target="_blank">users.yml</a></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">URL</th>\n\t\t\t\t\t<td><a href="{{hostPrefix}}:8000" target="_blank">{{hostPrefix}}:8000</a></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">User</th>\n\t\t\t\t\t<td>morgan@site.com</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">Password</th>\n\t\t\t\t\t<td>1</td>\n\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n\t<div class="card no-shadow">\n\t\t<div class="card-header">\n\t\t\t<h3 class="card-title">Formio</h3>\n\t\t</div>\n\t\t<div class="card-block">\n\t\t\t<table class="name-value-table">\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">URL</th>\n\t\t\t\t\t<td><a href="http://45.79.141.45:8057" target="_blank">http://45.79.141.45:8057</a></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">User</th>\n\t\t\t\t\t<td>webmaster@digitalstate.ca</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th scope="row">Password</th>\n\t\t\t\t\t<td>changeme</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n\n</div>\n'},1958:function(t,n){t.exports='<form [formGroup]="form" id="accordion" class="accordion" role="tablist" aria-multiselectable="true">\n\t<div *ngFor="let translationSlug of translationSlugs" class="card entity-card collapsed animated fadeIn">\n\t\t<div class="card-header">\n\t\t\t<div class="row justify-content-between">\n\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t<div class="m-0 float-right zindex-1 position-relative">\n\t\t\t\t\t\t<a data-toggle="collapse"\n\t\t\t\t\t\t   data-parent="#accordion"\n\t\t\t\t\t\t   href="#collapse-{{ translationSlug }}"\n\t\t\t\t\t\t   class="btn btn-default btn-icon collapsed">\n\t\t\t\t\t\t\t<i class="ion-plus show-on-collapse"></i>\n\t\t\t\t\t\t\t<i class="ion-minus hide-on-collapse"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<h3 class="card-title pt-2">{{ \'general.\' + translationSlug | translate }}</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div id="collapse-{{ translationSlug }}" class="card-block collapse">\n\t\t\t<div class="form-group mb-0">\n\t\t\t\t<textarea [formControlName]="translationSlug" class="form-control code h-100" rows="15" json></textarea>\n\t\t\t\t<button type="button"  (click)="saveTranslation(translationSlug)"\n\t\t\t\t\t\t[disabled]="saveInProgress"\n\t\t\t\t\t\t[ladda]="saveInProgress"\n\t\t\t\t\t\tclass="btn btn-primary mt-3">\n\t\t\t\t\t{{\'ds.microservices.entity.action.save\' | translate}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>\n\n<div id="accordion-active-translations" class="accordion" role="tablist" aria-multiselectable="true">\n\t<div class="card entity-card collapsed animated fadeIn">\n\t\t<div class="card-header">\n\t\t\t<div class="row justify-content-between">\n\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t<div class="ml-4 float-right zindex-1 position-relative">\n\t\t\t\t\t\t<a data-toggle="collapse"\n\t\t\t\t\t\t   data-parent="#accordion-active-translations"\n\t\t\t\t\t\t   href="#collapse-active-translations"\n\t\t\t\t\t\t   class="btn btn-default btn-icon collapsed">\n\t\t\t\t\t\t\t<i class="ion-plus show-on-collapse"></i>\n\t\t\t\t\t\t\t<i class="ion-minus hide-on-collapse"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button (click)="reloadTranslations()" type="button"\n\t\t\t\t\t\t\tclass="btn btn-default float-right zindex-1 position-relative">\n\t\t\t\t\t\t{{ \'ds.microservices.entity.action.reload\' | translate }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<h3 class="card-title pt-2">{{ \'general.activeTranslation\' | translate }}</h3>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div id="collapse-active-translations" class="card-block collapse">\n\t\t\t<pre class="code">{{ activeTranslations | json }}</pre>\n\t\t</div>\n\t</div>\n</div>'}});